webpackJsonp([12],{MZ80:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("hOPP"),a=i("Tftl"),o=i("cXnC"),n={components:{Button:s.a,SolidButton:a.a,Table:o.a},data:function(){return{currentPage1:1,rows:[],list:[],system:[],plus:!1,id:"",title:"",num:0,pageNum:"1",pageRows:"10",form:{terminal:"",version:"",isLow:""},formLabelWidth:"70px",add:{text:"新增",type:"icon-add"},edit:{text:"编辑",type:"icon-edit"},tableName:[{value:"terminal",name:"设备名称"},{value:"version",name:"版本号"},{value:"isLow",name:"是否是最低版本"},{value:"updateTime",name:"更新时间"}]}},methods:{handleSelectionChange:function(t){this.list=t},toggleSelection:function(t){var e=this,i=[];i.push(t),i?i.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},addClick:function(){this.title="新增菜单",this.plus=!0,this.form.terminal="",this.form.version="",this.followed=!0},editClick:function(){var t=this;0==this.list.length?this.$message({message:"至少选择一条数据",type:"warning"}):this.list.length>1?this.$message({message:"只能选择一条数据",type:"warning"}):(this.title="编辑菜单",this.plus=!0,this.form.terminal=this.list[0].terminal,this.form.version=this.list[0].version,this.id=this.list[0].id,this.$api.post("/crm/version/getTerminalList",{},function(e){t.menu=e.repData},function(t){console.log(t)}))},loadData:function(){var t=this,e={type:"0",pageNum:this.pageNum,pageRows:this.pageRows};t.$api.post("/crm/version/doVersionList",e,function(e){t.rows=e.repData.list,t.num=e.repData.total},function(t){console.log(t)}),t.$api.post("/crm/version/getTerminalList",{},function(e){t.system=e.repData},function(t){console.log(t)})},handleSizeChange:function(t){this.pageRows=t,this.loadData()},handleCurrentChange:function(t){this.pageNum=t,this.loadData()},confirm:function(){var t=this;if(""!=this.form.terminal)if(""!=this.form.version){var e="";"新增菜单"==this.title?e="新增成功":"编辑菜单"==this.title&&(e="修改成功");var i={id:this.id,terminal:this.form.terminal,version:this.form.version,isLow:this.form.isLow?1:0};this.$api.post("crm/version/doVersionAddOrUpdate",i,function(i){t.$message({message:e,type:"success"}),t.plus=!1,t.loadData()},function(t){console.log(t)})}else this.$message({message:"请输入版本号",type:"warning"});else this.$message({message:"请选择设备",type:"warning"})}},created:function(){this.loadData()}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-box v-box"},[i("div",{staticClass:"headDiv"},[i("div",{staticStyle:{padding:"20px",height:"auto",float:"left"}},[i("Button",{attrs:{type:t.add.type,icon:t.add.icon,text:t.add.text},on:{click:t.addClick}}),t._v(" "),i("Button",{attrs:{type:t.edit.type,icon:t.edit.icon,text:t.edit.text},on:{click:t.editClick}})],1)]),t._v(" "),i("div",{staticClass:"flexTable"},[i("Table",{attrs:{data:t.rows,tableName:t.tableName,currentPage1:t.currentPage1,num:t.num},on:{"selection-change":t.handleSelectionChange,"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.title,visible:t.plus,width:"600px",center:""},on:{"update:visible":function(e){t.plus=e}}},[i("el-form",{staticClass:"clearfix",attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"选择设备","label-width":t.formLabelWidth}},[i("el-select",{staticClass:"selectwidth",attrs:{placeholder:"请选择设备"},model:{value:t.form.terminal,callback:function(e){t.$set(t.form,"terminal",e)},expression:"form.terminal"}},t._l(t.system,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),i("el-form-item",{staticClass:"lastformItem",attrs:{label:"版本号","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入版本号","auto-complete":"off"},model:{value:t.form.version,callback:function(e){t.$set(t.form,"version",e)},expression:"form.version"}})],1),t._v(" "),i("el-form-item",[i("el-checkbox-group",{model:{value:t.form.isLow,callback:function(e){t.$set(t.form,"isLow",e)},expression:"form.isLow"}},[i("el-checkbox",{attrs:{label:"是否是最低版本"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("SolidButton",{attrs:{type:"hollow",text:"取消"},on:{click:function(e){t.plus=!1}}}),t._v(" "),i("SolidButton",{attrs:{type:"solid",text:"确定"},on:{click:t.confirm}})],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(n,l,!1,function(t){i("NpWi")},"data-v-6b743f9c",null);e.default=r.exports},NpWi:function(t,e){}});
//# sourceMappingURL=12.559beb7634f86819336e.js.map