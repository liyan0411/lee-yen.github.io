webpackJsonp([18],{HuTt:function(e,t){},XU68:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("hOPP"),i=a("Tftl"),l=a("cXnC"),s={components:{Button:n.a,SolidButton:i.a,Table:l.a},data:function(){return{userId:"",custType:"",type:"",add:{text:"导出",type:"icon-export",icon:"icon-export"},head:{vin:"",urgentStatus:"",urgentStatusList:[{id:1,name:"未受理"},{id:2,name:"已受理"}],isHidden:"inline"},exportLoading:!1,receiveIds:[],dealerList:[],dealerName:"",dealerId:"",dealerCode:"",dealerType:"",rows:[],multipleSelection:[],ids:[],tableName:[{value:"vin",name:"VIN"},{value:"code",name:"加急状态"},{value:"pname",name:"经销商"}],currentPage:1,pageRows:10,pageTotal:0}},computed:{},watch:{},filters:{},methods:{getCusType:function(){var e=this,t={id:e.userId};e.$api.post("/crm/customer/getByPrimaryKey",t,function(t){console.log(t),e.type=t.repData.type,e.dealerType=t.repData.type,e.custType=t.repData.custType,1==e.custType||2==e.custType?e.head.isHidden="inline":e.head.isHidden="none",e.loadData()},function(e){console.log(e)})},loadData:function(){var e=this,t={pageNum:e.currentPage,pageRows:e.pageRows,vin:e.head.vin,isUrgent:e.head.urgentStatus,custtype:e.custType,type:e.dealerType,dealerCode:e.dealerCode,dealerId:e.dealerId};e.$api.post("/crm/orderUrgent/getList",t,function(t){console.log(t),e.rows=t.repData.list,e.pageTotal=t.repData.total},function(e){console.log(e)})},queryClick:function(){this.loadData()},resetClick:function(){this.head.vin="",this.head.urgentStatus="",this.dealerName="",this.dealerType=this.type,this.dealerCode="",this.dealerId="",this.loadData()},querySearch:function(e,t){var a=this,n=[];if(0!=e.length){console.log(e,t);var i={conditions:e};(a=this).$api.post("/crm/orderUrgent/getDealers",i,function(n){console.log(n),a.dealerList=n.repData.list;var i=e?a.dealerList.filter(a.createFilter(e)):a.dealerList;t(i)},function(e){console.log(e),t(n)})}else t(n)},createFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},loadAll:function(){var e=this,t={conditions:queryString};e.$api.post("/crm/orderUrgent/getDealers",t,function(t){console.log(t),e.dealerList=t.repData.list},function(e){console.log(e)})},handleSelect:function(e){console.log(e),this.dealerId=e.id,this.dealerCode=e.code,this.dealerType=e.type},exportClick:function(){var e=this;0==this.multipleSelection.length?this.$message({message:"未勾选数据",type:"warning"}):this.$confirm("确定导出勾选数据吗？","",{confirmButtonText:"是",cancelButtonText:"否",type:"",center:!0}).then(function(){e.exportMethod()}).catch(function(){})},exportMethod:function(){this.receiveIds=[];for(var e=0;e<this.multipleSelection.length;e++)this.receiveIds.push(this.multipleSelection[e].id);var t={vin:this.head.vin,isUrgent:this.head.urgentStatus,custtype:this.custType,type:this.dealerType,dealerCode:this.dealerCode,dealerId:this.dealerId,receiveIds:this.receiveIds};this.$api.post("/crm/excle/exportUrgentOrders",t,function(e){console.log(e)},function(e){console.log(e)})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e)},toggleSelection:function(e){var t=this,a=[];a.push(e),a?a.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSizeChange:function(e){console.log("每页"+e),this.pageRows=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页"+e),this.currentPage=e,this.loadData()}},created:function(){var e=this.$api.sGetObject("_user");this.userId=e.userId,this.getCusType()},mounted:function(){}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-box v-box"},[a("div",{staticClass:"headDiv"},[a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"spanclass"},[e._v("VIN")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入vin码",clearable:""},model:{value:e.head.vin,callback:function(t){e.$set(e.head,"vin",t)},expression:"head.vin"}})],1),e._v(" "),a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"spanclass"},[e._v("账户状态")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择加急状态"},model:{value:e.head.urgentStatus,callback:function(t){e.$set(e.head,"urgentStatus",t)},expression:"head.urgentStatus"}},e._l(e.head.urgentStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"headerLeft",style:{display:e.head.isHidden}},[a("span",{staticClass:"spanclass"},[e._v("经销商/仓库")]),e._v(" "),a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容","trigger-on-focus":!1,"value-key":"name"},on:{select:e.handleSelect},model:{value:e.dealerName,callback:function(t){e.dealerName=t},expression:"dealerName"}})],1),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"headRight"},[a("SolidButton",{attrs:{type:"solid",text:"查询"},on:{click:e.queryClick}}),e._v(" "),a("SolidButton",{attrs:{type:"hollow",text:"重置"},on:{click:e.resetClick}})],1)]),e._v(" "),a("div",{staticClass:"iconButton clearfix"},[a("Button",{attrs:{type:e.add.type,icon:e.add.icon,text:e.add.text,loading:e.exportLoading},on:{click:e.exportClick}})],1)]),e._v(" "),a("div",{staticClass:"flexTable"},[a("div",{staticClass:"d-box v-box"},[a("div",{staticClass:"flexTable"},[a("div",{staticClass:"tableDiv"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%",padding:"0 20px"},attrs:{stripe:"",data:e.rows,"tooltip-effect":"dark",height:"100%"},on:{"selection-change":e.handleSelectionChange,"row-click":e.toggleSelection}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"vin",label:"VIN",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isUrgent",label:"加急状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"经销商",align:"center"}})],1)],1)]),e._v(" "),a("div",{staticClass:"footerDiv"},[a("el-pagination",{staticStyle:{"text-align":"center",padding:"6px 0px"},attrs:{"current-page":e.currentPage,"page-size":e.pageRows,layout:"total,sizes, prev,pager, next,jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)])])])},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(e){a("HuTt")},"data-v-3ea6d5ef",null);t.default=r.exports}});
//# sourceMappingURL=18.b8f715d4ff71aa5381f3.js.map