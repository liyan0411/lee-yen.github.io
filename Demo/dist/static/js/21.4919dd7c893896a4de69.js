webpackJsonp([21],{JIfR:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("hOPP"),a=s("Tftl"),n={components:{Button:i.a,SolidButton:a.a},data:function(){return{num:0,currentPage1:1,rows:[],name:"",plus:!1,title:"",ids:"",followed:"",pageNum:"1",pageRows:"10",formLabelWidth:"77px",add:{text:"新增",type:"icon-add",icon:"el-icon-plus"},list:[{name:""}],questions:[],replyAnswer:"",queslist:[],flag:!1,replyType:""}},methods:{changeValue:function(){if(10!=this.list.length)for(var t=0;t<this.list.length;t++){if(""==this.list[t].name)return void(this.flag=!1);this.flag=!0}else this.flag=!1},off:function(t){1!=this.list.length?this.list.splice(t,1):this.$message({message:"不能删除",type:"warning"});for(var e=0;e<this.list.length;e++){if(""==this.list[e].name)return void(this.flag=!1);this.flag=!0}},addPush:function(){this.flag=!1,this.list.push({name:""})},addClick:function(){this.flag=!1,this.title="新增",this.list=[{name:""}],this.plus=!0,this.replyAnswer=""},deleteClick:function(t){var e=this;this.$api.post("crm/wxReply/delete",t,function(t){e.loadData()},function(t){console.log(t)})},editClick:function(t){this.title="编辑",this.list=[],this.plus=!0,this.replyAnswer=t.replyAnswer,this.replyType=t.replyType;for(var e=0;e<t.questions.length;e++)this.list.push({name:t.questions[e]})},loadData:function(){var t=this,e=this,s={replyQuestion:e.name,type:"1",pageNum:e.pageNum,pageRows:e.pageRows,operateCode:"100",operateName:"test"};e.$api.post("crm/wxReply/getReplyList",s,function(t){e.rows=t.repData.list,e.num=t.repData.total},function(e){t.$message({message:e.repData.repMsg,type:"error"})})},handleSizeChange:function(t){this.pageRows=t,this.loadData()},handleCurrentChange:function(t){this.pageNum=t,this.loadData()},see:function(){this.loadData()},reset:function(){this.name="",this.loadData()},confirm:function(){var t=this,e=this;this.questions=[];for(var s=0;s<this.list.length;s++)this.questions.push(document.getElementById("input"+s).value);if(""!=this.questions){for(s=0;s<this.questions.length;s++)if(""==this.questions[s])return this.$message({message:"请填写全部问题",type:"warning"}),!1;if(""==this.replyAnswer)return this.$message({message:"请填写回答",type:"warning"}),!1;this.$api.post("crm/wxReply/insertOrUpdate",{questions:this.questions,replyAnswer:this.replyAnswer,replyType:this.replyType},function(s){t.plus=!1,e.loadData()},function(t){console.log(t)})}}},created:function(){this.loadData()}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-box v-box"},[s("div",{staticClass:"headDiv"},[s("div",{staticClass:"headerLeft"},[s("span",{staticClass:"system"},[t._v("关键字搜索")]),t._v(" "),s("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),s("div",{staticClass:"clearfix"},[s("div",{staticStyle:{float:"right"}},[s("SolidButton",{attrs:{type:"solid",text:"查询"},on:{click:t.see}}),t._v(" "),s("SolidButton",{attrs:{type:"hollow",text:"重置"},on:{click:t.reset}})],1)]),t._v(" "),s("div",{staticClass:"clearfix",staticStyle:{"padding-top":"20px",height:"auto"}},[s("Button",{attrs:{type:t.add.type,icon:t.add.icon,text:t.add.text},on:{click:t.addClick}})],1)]),t._v(" "),s("div",{staticClass:"flexTable"},[s("div",{staticClass:"d-box v-box"},[s("div",{staticClass:"flexTable"},[s("div",{staticClass:"tableDiv"},t._l(t.rows,function(e){return s("div",{staticClass:"problem"},[s("div",{staticClass:"problemT"},[s("div",{staticClass:"problemTop"},[s("span",[t._v("问题")]),t._v(" "),s("ul",t._l(e.questions,function(e){return s("li",{domProps:{textContent:t._s(e)}})}))]),t._v(" "),s("div",{staticClass:"problemBotton"},[s("span",[t._v("答案:")]),t._v(" "),s("ul",[s("li",{domProps:{textContent:t._s(e.replyAnswer)}})])])]),t._v(" "),s("div",{staticClass:"problemB"},[s("div",{staticClass:"operation"},[s("button",{staticClass:"icon-edit icon",on:{click:function(s){t.editClick(e)}}}),t._v(" "),s("button",{staticClass:"icon-delete icon",on:{click:function(s){t.deleteClick(e.replyType)}}})]),t._v(" "),s("div",{staticClass:"time"},[s("span",{staticClass:"timeP"},[t._v("创建于:")]),t._v(" "),s("span",{staticClass:"timeP",domProps:{textContent:t._s(e.createTime)}})])])])}))]),t._v(" "),s("div",{staticClass:"footerDiv"},[s("el-pagination",{staticStyle:{"text-align":"center",padding:"6px 0px"},attrs:{"current-page":t.currentPage1,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.num},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])]),t._v(" "),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.title,visible:t.plus,width:"600px"},on:{"update:visible":function(e){t.plus=e}}},[s("div",{staticClass:"content"},[s("div",{staticClass:"contentTop"},[s("div",{staticClass:"contentLeft"},[t._v("问题")]),t._v(" "),s("div",{staticClass:"contentRight"},[t._l(t.list,function(e,i){return s("div",{staticClass:"contentInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"o.name"}],attrs:{id:"input"+i},domProps:{value:e.name},on:{input:[function(s){s.target.composing||t.$set(e,"name",s.target.value)},t.changeValue]}}),t._v(" "),s("span",{staticClass:"off",attrs:{id:"off"+i},on:{click:function(e){t.off(i)}}},[t._v("x")])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"add el-icon-plus",on:{click:t.addPush}})],2)]),t._v(" "),s("div",{staticClass:"contentBotton"},[s("div",{staticClass:"contentLeft"},[t._v("回答")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyAnswer,expression:"replyAnswer"}],domProps:{value:t.replyAnswer},on:{input:function(e){e.target.composing||(t.replyAnswer=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("SolidButton",{attrs:{type:"hollow",text:"取消"},on:{click:function(e){t.plus=!1}}}),t._v(" "),s("SolidButton",{attrs:{type:"solid",text:"确认"},on:{click:t.confirm}})],1)])],1)},staticRenderFns:[]};var o=s("VU/8")(n,l,!1,function(t){s("sVEI")},"data-v-31c2c634",null);e.default=o.exports},sVEI:function(t,e){}});
//# sourceMappingURL=21.4919dd7c893896a4de69.js.map