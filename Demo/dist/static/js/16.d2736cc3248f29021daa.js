webpackJsonp([16],{"6knN":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{SolidButton:a("Tftl").a},data:function(){return{title:"",message:"",form:{id:"",brandcode:"",dealername:"",dealershtname:"",addr:"",prov:"",city:"",linkman1:"",linktel1:"",email:"",dealerCodes:""},brandName:[],provList:[],cityList:[],formLabelWidth:"100px",loading:!1,options4:[],list:""}},methods:{loadData:function(){var e=this,t=this;if(t.$api.post("/crm/dealer/getBrandCodes",{},function(e){t.brandName=e.repData},function(t){e.$message({message:t.repData.repMsg,type:"error"})}),t.$api.post("/crm/region/provinces",{},function(e){t.provList=e.repData},function(t){e.$message({message:t.repData.repMsg,type:"error"})}),void 0!=this.list){this.title="修改",this.message="修改成功",this.form.id=this.list.id,this.form.brandcode=this.list.brandcode,this.form.dealername=this.list.dealername,this.form.dealershtname=this.list.dealershtname,this.form.addr=this.list.addr,this.form.prov=this.list.prov,this.form.city=this.list.city,this.form.linkman1=this.list.linkman1,this.form.linktel1=this.list.linktel1,this.form.email=this.list.email;for(var a=[],s=0;s<this.list.dealerOmsList.length;s++)a.push(this.list.dealerOmsList[s].dealerCode),this.options4.push({dealerName:this.list.dealerOmsList[s].dealerName,dealerCode:this.list.dealerOmsList[s].dealerCode});this.form.dealerCodes=a}else this.title="新增经销商",this.message="新增成功"},upper:function(){this.$router.push({path:"/DealerManage",query:{}})},submit:function(){var e=this,t=this;""!=this.form.brandcode?""!=this.form.dealername?""!=this.form.dealershtname?""!=this.form.addr?""!=this.form.prov?""!=this.form.city?""!=this.form.linkman1?""!=this.form.linktel1?""!=this.form.email?""!=this.form.dealerCodes?this.$api.post("/crm/dealer/insertOrUpdate",this.form,function(a){e.$message({message:e.message,type:"success"}),setTimeout(function(){t.upper()},1e3)},function(e){console.log(e)}):this.$message({message:"请选择MDM经销商",type:"warning"}):this.$message({message:"请输入联系邮箱",type:"warning"}):this.$message({message:"请输入联系人电话",type:"warning"}):this.$message({message:"请输入联系人",type:"warning"}):this.$message({message:"请选择城市",type:"warning"}):this.$message({message:"请选择省份",type:"warning"}):this.$message({message:"请输入地址",type:"warning"}):this.$message({message:"请输入经销商简称",type:"warning"}):this.$message({message:"请输入经销商全称",type:"warning"}):this.$message({message:"请选择品牌",type:"warning"})},onSubmit:function(){console.log("submit!")},chose:function(e){var t=this;this.$api.post("/crm/region/cities",{parentCode:e},function(e){t.cityList=e.repData},function(e){console.log(e)})},remoteMethod:function(e){var t=this,a=this;""!==e?(this.loading=!0,setTimeout(function(){a.$api.post("/crm/dealer/getDealerList",{dealerName:e,pageNum:1,pageRows:10},function(e){e.repData.length>0?a.options4=e.repData:t.options4=[],t.loading=!1},function(e){a.$message.error("请求出错")})},200)):this.options4=[]},choise:function(){}},created:function(){this.list=this.$route.query.list,this.loadData()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"100%",background:"#fff"}},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-circle-close-outline",on:{click:e.upper}}),e._v(" "),a("span",{domProps:{textContent:e._s(e.title)},on:{click:e.upper}})]),e._v(" "),a("div",{staticClass:"nav"},[a("el-form",{ref:"form",staticStyle:{width:"70%"},attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{attrs:{placeholder:"请选择系统"},model:{value:e.form.brandcode,callback:function(t){e.$set(e.form,"brandcode",t)},expression:"form.brandcode"}},e._l(e.brandName,function(e){return a("el-option",{key:e.brandcode,attrs:{label:e.dealername,value:e.brandcode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"经销商全称"}},[a("el-input",{attrs:{placeholder:"请输入经销商全称"},model:{value:e.form.dealername,callback:function(t){e.$set(e.form,"dealername",t)},expression:"form.dealername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经销商简称"}},[a("el-input",{attrs:{placeholder:"请输入经销商简称"},model:{value:e.form.dealershtname,callback:function(t){e.$set(e.form,"dealershtname",t)},expression:"form.dealershtname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省份"}},[a("el-select",{attrs:{placeholder:"请选择省份"},on:{change:e.chose},model:{value:e.form.prov,callback:function(t){e.$set(e.form,"prov",t)},expression:"form.prov"}},e._l(e.provList,function(e){return a("el-option",{key:e.regionCode,attrs:{label:e.regionName,value:e.regionCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"城市"}},[a("el-select",{attrs:{placeholder:"请选择城市"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},e._l(e.cityList,function(e){return a("el-option",{key:e.regionCode,attrs:{label:e.regionName,value:e.regionCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.form.linkman1,callback:function(t){e.$set(e.form,"linkman1",t)},expression:"form.linkman1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.form.linktel1,callback:function(t){e.$set(e.form,"linktel1",t)},expression:"form.linktel1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系邮箱"}},[a("el-input",{attrs:{placeholder:"请输入联系邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"66%"},attrs:{label:"MDM经销商","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",remote:"",placeholder:"请输入经销商名称","remote-method":e.remoteMethod,loading:e.loading,clearable:""},on:{change:e.choise},model:{value:e.form.dealerCodes,callback:function(t){e.$set(e.form,"dealerCodes",t)},expression:"form.dealerCodes"}},e._l(e.options4,function(e){return a("el-option",{key:e.dealerCode,attrs:{label:e.dealerName,value:e.dealerCode}})}))],1)],1)],1),e._v(" "),a("div",{staticClass:"headerRight"},[a("SolidButton",{attrs:{type:"hollow",text:"取消"},on:{click:e.upper}}),e._v(" "),a("SolidButton",{attrs:{type:"solid",text:"提交"},on:{click:e.submit}})],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(e){a("JhNi")},"data-v-4b155089",null);t.default=r.exports},JhNi:function(e,t){}});
//# sourceMappingURL=16.d2736cc3248f29021daa.js.map