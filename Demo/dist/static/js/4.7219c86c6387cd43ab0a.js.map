{"version":3,"sources":["webpack:///src/view/list/newRole.vue","webpack:///./src/view/list/newRole.vue?1730","webpack:///./src/view/list/newRole.vue","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/babel-runtime/helpers/defineProperty.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js"],"names":["newRole","components","SolidButton","data","_ref","textarea","name","status","user","system","keys","list","form","id","description","auths","defineProperty_default","children","label","methods","loadData","_this","this","self","undefined","roleId","$api","post","r","repData","role","toString","sys","sysId","i","length","idList","push","tempArray1","tempArray2","k","authId","splice","j","e","$message","message","repMsg","type","console","log","sysName","upper","$router","path","query","chosesys","o","_this2","document","getElementById","className","getCheckedKeys","_this3","$route","$refs","tree","getCheckedNodes","arr","arrlist","pId","indexOf","created","list_newRole","render","_vm","_h","$createElement","_c","_self","staticStyle","width","background","height","staticClass","attrs","on","click","_v","gutter","span","placeholder","clearable","model","value","callback","$$v","$set","expression","_l","item","key","code","resize","rows","round","domProps","textContent","_s","$event","ref","show-checkbox","node-key","default-expand-all","default-checked-keys","props","defaultProps","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","$Object","Object","module","exports","it","desc","defineProperty","default","__esModule","obj","_defineProperty","_defineProperty2","enumerable","configurable","writable","$export","S","F","f"],"mappings":"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","file":"static/js/4.7219c86c6387cd43ab0a.js","sourcesContent":["<template>\n\t<div style=\"width: 100%; background: #fff;height: 100%;\">\n\t\t<div class=\"top\">\n\t\t\t<el-button type=\"text\" @click='upper'>返回</el-button>\n\t\t</div>\n\t\t<el-row :gutter=\"0\">\n\t\t\t<el-col :span=\"7\">\n\t\t\t\t<div class=\"grid-content bg-purple\">\n\t\t\t\t\t<p class=\"prompt\">第一步：新建角色</p>\n\t\t\t\t\t<div class=\"public\">\n\t\t\t\t\t\t<span class=\"system\">角色名称</span>\n\t\t\t\t\t\t<el-input placeholder=\"请输入角色名称\" v-model=\"form.name\" clearable>\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"public\">\n\t\t\t\t\t\t<span class=\"system\">状态</span>\n\t\t\t\t\t\t<el-select v-model=\"form.status\" placeholder=\"请选择状态\">\n\t\t\t\t\t\t\t<el-option v-for=\"item in status\" :key=\"item.code\" :label=\"item.name\" :value=\"item.code\"></el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"public\">\n\t\t\t\t\t\t<span class=\"system\">角色描述</span>\n\t\t\t\t\t\t<el-input type=\"textarea\" resize=\"none\" :rows=\"4\" placeholder=\"请输入描述\" v-model=\"form.description\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-col>\n\t\t\t<el-col :span=\"7\">\n\t\t\t\t<div class=\"grid-content bg-purple\">\n\t\t\t\t\t<p class=\"prompt\">第二步：选择系统</p>\n\t\t\t\t\t<div class='button' v-for=\"o in system\" round>\n\t\t\t\t\t\t<span :id=\"o.id\" v-text='o.name' @click='chosesys(o)'></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-col>\n\t\t\t<el-col :span=\"8\">\n\t\t\t\t<div class=\"grid-content bg-purple\">\n\t\t\t\t\t<p class=\"prompt\">第三步：选择对应系统的权限树</p>\n\t\t\t\t\t<el-tree :data=\"list\" show-checkbox node-key=\"id\" default-expand-all :default-checked-keys=\"keys\" ref=\"tree\" :props=\"defaultProps\">\n\t\t\t\t\t</el-tree>\n\t\t\t\t</div>\n\t\t\t</el-col>\n\t\t</el-row>\n\t\t<div class=\"footer\">\n\t\t\t<el-button class=\"button-solid\" @click=\"getCheckedKeys\">保存配置</el-button>\n\t\t</div>\n\n\t</div>\n\n</template>\n\n<script>\n\timport SolidButton from '../SelfControls/solidButton/solidButton.vue';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tSolidButton\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttextarea: '',\n\t\t\t\tname: '',\n\t\t\t\tstatus: [],\n\t\t\t\tuser: [],\n\t\t\t\tsystem: [],\n\t\t\t\tkeys: [],\n\t\t\t\tlist: [],\n\t\t\t\tform: {\n\t\t\t\t\tid: '',\n\t\t\t\t\tstatus: '1',\n\t\t\t\t\tname: '',\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tauths: '',\n\t\t\t\t},\n\t\t\t\tlist: [],\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tchildren: 'children',\n\t\t\t\t\tlabel: 'authName'\n\t\t\t\t},\n\t\t\t\tsysId: '',\n\t\t\t\tsysName: '',\n\t\t\t\tids: [],\n\t\t\t\troleId: '',\n\t\t\t\tidList: [],\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\n\t\t\t//初始化数据\n\t\t\tloadData() {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(self.roleId != undefined) {\n\t\t\t\t\tself.$api.post('role/query', {\n\t\t\t\t\t\tid: self.roleId\n\t\t\t\t\t}, r => {\n\t\t\t\t\t\tself.form.status = r.repData.role.status.toString();\n\t\t\t\t\t\tself.form.name = r.repData.role.name;\n\t\t\t\t\t\tself.form.description = r.repData.role.description;\n\t\t\t\t\t\t//返回选中数组不为空 加载树结构\n\t\t\t\t\t\tif(r.repData.sys != '') {\n\t\t\t\t\t\t\tself.sysId = r.repData.sys[0].id;\n\t\t\t\t\t\t\tself.$api.post('role/doAuthBySysId', {\n\t\t\t\t\t\t\t\tsysId: this.sysId,\n\t\t\t\t\t\t\t}, r => {\n\t\t\t\t\t\t\t\tthis.list = r.repData\n\t\t\t\t\t\t\t\tfor(var i = 0; i < this.list.length; i++) {\n\t\t\t\t\t\t\t\t\tthis.idList.push(this.list[i].id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tself.$api.post('role/doRoleAuth', {\n\t\t\t\t\t\t\t\t\troleId: this.roleId\n\t\t\t\t\t\t\t\t}, r => {\n\t\t\t\t\t\t\t\t\tif(r.repData != '') {\n\t\t\t\t\t\t\t\t\t\tvar tempArray1 = r.repData; //接收返回选中参数\n\t\t\t\t\t\t\t\t\t\tvar tempArray2 = [];\n\t\t\t\t\t\t\t\t\t\tfor(var i = 0; i < tempArray1.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\tfor(var k = 0; k < this.idList.length; k++) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(tempArray1[i].authId === this.idList[k]) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttempArray1.splice(i, 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tfor(var j = 0; j < tempArray1.length; j++) {\n\t\t\t\t\t\t\t\t\t\t\ttempArray2.push(tempArray1[j].authId)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tthis.keys = tempArray2\n\t\t\t\t\t\t\t\t\t\tthis.form.auths = this.keys.toString();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tself.$api.post('role/doAuthBySysId', {\n\t\t\t\t\t\t\t\t\t\tsysId: this.sysId,\n\t\t\t\t\t\t\t\t\t}, r => {\n\t\t\t\t\t\t\t\t\t\tthis.list = r.repData\n\t\t\t\t\t\t\t\t\t}, e => {\n\t\t\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\t\t\t\tmessage: e.repData.repMsg,\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}, e => {})\n\t\t\t\t\t\t\t}, e => {\n\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\t\tmessage: e.repData.repMsg,\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, e => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tmessage: e.repData.repMsg,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tself.form.status = '';\n\t\t\t\t\tself.form.name = '';\n\t\t\t\t\tself.form.description = '';\n\t\t\t\t\tself.form.id = '';\n\t\t\t\t}\n\t\t\t\t//状态\n\t\t\t\tself.$api.post('role/querystatus', {}, r => {\n\t\t\t\t\tself.status = r.repData\n\t\t\t\t}, e => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t})\n\t\t\t\t//组织\n\t\t\t\tself.$api.post('org/queryOrgByUserId', {}, r => {\n\t\t\t\t\tself.user = r.repData\n\t\t\t\t}, e => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t})\n\t\t\t\t//系统\n\t\t\t\tself.$api.post('role/queryallsys', {}, r => {\n\t\t\t\t\tself.system = r.repData;\n\t\t\t\t\tself.sysName = r.repData[0].name;\n\t\t\t\t\tif(this.sysId != '') {\n\t\t\t\t\t\tthis.$api.post('role/doAuthBySysId', {\n\t\t\t\t\t\t\tsysId: this.sysId,\n\t\t\t\t\t\t}, r => {\n\t\t\t\t\t\t\tthis.list = r.repData\n\t\t\t\t\t\t}, e => {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}, e => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t})\n\t\t\t},\n\t\t\t//返回\n\t\t\tupper() {\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tpath: \"/RoleManage\",\n\t\t\t\t\tquery: {}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//选择系统事件\n\t\t\tchosesys(o) {\n\t\t\t\tconsole.log(o)\n\t\t\t\tthis.sysId = o.id;\n\t\t\t\tthis.sysName = o.name;\n\n\t\t\t\tfor(var i = 0; i < this.system.length; i++) {\n\t\t\t\t\tdocument.getElementById(this.system[i].id).className = '';\n\t\t\t\t}\n\t\t\t\tdocument.getElementById(o.id).className = 'span';\n\n\t\t\t\tthis.$api.post('role/doAuthBySysId', {\n\t\t\t\t\tsysId: this.sysId,\n\t\t\t\t}, r => {\n\t\t\t\t\tthis.list = r.repData\n\t\t\t\t}, e => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetCheckedKeys() {\n\t\t\t\tvar id = this.$route.query.id;\n\t\t\t\tvar list = this.$refs.tree.getCheckedNodes();\n\n\t\t\t\t//\t\t\t\tconsole.log(list);\n\t\t\t\t//\t\t\t\treturn false;\n\t\t\t\tvar arr = [];\n\t\t\t\tvar arrlist = []\n\t\t\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\t\t\tarr.push(list[i].pId)\n\t\t\t\t\tarr.push(list[i].id)\n\t\t\t\t\tfor(var j = 0; j < arr.length; j++) {\n\t\t\t\t\t\tif(arr[j] == null) {\n\t\t\t\t\t\t\tarr.splice(j, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(arrlist.indexOf(arr[j]) == -1) {\n\t\t\t\t\t\t\tarrlist.push(arr[j])\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.form.auths = arrlist.toString();\n\t\t\t\tif(this.form.name == '') {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '角色名称不能为空',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.form.status == '') {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '请选择状态',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(id != undefined) {\n\t\t\t\t\tthis.$api.post('role/update', this.form, r => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tmessage: '修改成功',\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.upper();\n\t\t\t\t\t}, e => {\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.$api.post('role/save', this.form, r => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tmessage: '新增成功',\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.upper();\n\t\t\t\t\t}, e => {\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.roleId = this.$route.query.id\n\t\t\tthis.form.id = this.$route.query.id\n\t\t\tthis.loadData();\n\t\t},\n\t}\n</script>\n\n<style scoped=\"scoped\">\n\t.inner {\n\t\tpadding: 10px 15px 0 15px;\n\t}\n\t\n\t.span {\n\t\tcolor: red;\n\t\tborder: 1px solid #f60;\n\t\tborder-radius: 10px;\n\t}\n\t\n\t.top {\n\t\twidth: 95%;\n\t\tpadding: 20px 20px 0 20px;\n\t}\n\t\n\t.footer {\n\t\twidth: 100%;\n\t\ttext-align: center;\n\t}\n\t\n\t.el-tree {\n\t\tpadding-left: 20%;\n\t\theight: 80%;\n\t\toverflow: auto;\n\t}\n\t\n\t.button {\n\t\twidth: 100%;\n\t\theight: 40px;\n\t\ttext-align: center;\n\t\tmargin-bottom: 10px;\n\t}\n\t\n\t.button span {\n\t\tdisplay: inline-block;\n\t\tmin-width: 30px;\n\t\tline-height: 40px;\n\t\tpadding: 0 10px;\n\t}\n\t\n\t.prompt {\n\t\ttext-align: center;\n\t\tline-height: 50px;\n\t\tcolor: #EA6645;\n\t}\n\t\n\t.system {\n\t\tfloat: left;\n\t\tline-height: 40px;\n\t\twidth: 20%;\n\t\t/*float: left;*/\n\t\ttext-align: center;\n\t}\n\t\n\t.el-select {\n\t\twidth: 80%;\n\t\t/*float: right;*/\n\t}\n\t\n\t.el-textarea {\n\t\twidth: 80%;\n\t\tfloat: right;\n\t\tpadding-top: 3px;\n\t}\n\t\n\t.el-input {\n\t\twidth: 80%;\n\t\tfloat: right;\n\t}\n\t\n\t#public {\n\t\t/*overflow: hidden;*/\n\t\tmargin-bottom: 10px;\n\t}\n\t\n\t#public .el-input {\n\t\twidth: 100%;\n\t}\n\t\n\t.public {\n\t\tfloat: left;\n\t\twidth: 100%;\n\t\tmargin-bottom: 10px;\n\t}\n\t\n\t.el-row {\n\t\tpadding: 0 20px;\n\t\theight: 80%;\n\t}\n\t\n\t.grid-content {\n\t\theight: 100%;\n\t}\n\t\n\t.el-col-8 {\n\t\theight: 100%;\n\t}\n\t/*实心*/\n\t\n\t.button-solid {\n\t\tbackground: #D9524F;\n\t\tcolor: white;\n\t\tborder-color: #D9524F;\n\t}\n\t\n\t.button-solid.is-active,\n\t.button-solid:active {\n\t\tbackground: #D9524F;\n\t\tborder-color: #D9524F;\n\t\tcolor: white;\n\t}\n\t\n\t.button-solid:focus,\n\t.button-solid:hover {\n\t\tbackground: #d85e5b;\n\t\tborder-color: #d85e5b;\n\t\tcolor: white;\n\t}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/view/list/newRole.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"background\":\"#fff\",\"height\":\"100%\"}},[_c('div',{staticClass:\"top\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.upper}},[_vm._v(\"返回\")])],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":0}},[_c('el-col',{attrs:{\"span\":7}},[_c('div',{staticClass:\"grid-content bg-purple\"},[_c('p',{staticClass:\"prompt\"},[_vm._v(\"第一步：新建角色\")]),_vm._v(\" \"),_c('div',{staticClass:\"public\"},[_c('span',{staticClass:\"system\"},[_vm._v(\"角色名称\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入角色名称\",\"clearable\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"public\"}},[_c('span',{staticClass:\"system\"},[_vm._v(\"状态\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择状态\"},model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}},_vm._l((_vm.status),function(item){return _c('el-option',{key:item.code,attrs:{\"label\":item.name,\"value\":item.code}})}))],1),_vm._v(\" \"),_c('div',{staticClass:\"public\"},[_c('span',{staticClass:\"system\"},[_vm._v(\"角色描述\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"textarea\",\"resize\":\"none\",\"rows\":4,\"placeholder\":\"请输入描述\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1)])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":7}},[_c('div',{staticClass:\"grid-content bg-purple\"},[_c('p',{staticClass:\"prompt\"},[_vm._v(\"第二步：选择系统\")]),_vm._v(\" \"),_vm._l((_vm.system),function(o){return _c('div',{staticClass:\"button\",attrs:{\"round\":\"\"}},[_c('span',{attrs:{\"id\":o.id},domProps:{\"textContent\":_vm._s(o.name)},on:{\"click\":function($event){_vm.chosesys(o)}}})])})],2)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"grid-content bg-purple\"},[_c('p',{staticClass:\"prompt\"},[_vm._v(\"第三步：选择对应系统的权限树\")]),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.list,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.keys,\"props\":_vm.defaultProps}})],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('el-button',{staticClass:\"button-solid\",on:{\"click\":_vm.getCheckedKeys}},[_vm._v(\"保存配置\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ce8b5a8c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/list/newRole.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ce8b5a8c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./newRole.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./newRole.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./newRole.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ce8b5a8c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./newRole.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ce8b5a8c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/list/newRole.vue\n// module id = null\n// module chunks = ","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 9bBU\n// module chunks = 4","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = C4MV\n// module chunks = 4","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/defineProperty.js\n// module id = bOdI\n// module chunks = 4","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = mClu\n// module chunks = 4"],"sourceRoot":""}