webpackJsonp([5],{FDYn:function(t,e){},LR6Y:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("hOPP"),i=s("cXnC"),o=s("Tftl"),l={components:{Button:a.a,Table:i.a,SolidButton:o.a},data:function(){return{currentPage1:1,rows:[],list:[],plus:!1,system:[],menu:[],id:"",title:"",num:0,pageNum:"1",pageRows:"10",form:{name:"",ico:"",authKey:"",sortNo:"",parentId:"",sysId:"",url:"",target:""},formLabelWidth:"70px",add:{text:"新增",type:"icon-add",icon:"el-icon-plus"},out:{text:"删除",type:"icon-delete",icon:"el-icon-delete"},edit:{text:"编辑",type:"icon-edit",icon:"el-icon-edit"},tableName:[{value:"name",name:"菜单名称"},{value:"authKey",name:"菜单标识"},{value:"parentName",name:"上级菜单"},{value:"ico",name:"菜单样式"},{value:"sortNo",name:"排序"},{value:"url",name:"URL"}]}},methods:{handleSelectionChange:function(t){this.list=t},toggleSelection:function(t){var e=this,s=[];s.push(t),s?s.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},addClick:function(){this.menu=[],this.title="新增菜单",this.plus=!0,this.form.name="",this.form.ico="",this.form.authKey="",this.form.sortNo="",this.form.parentId="",this.form.sysId="",this.form.url="",this.form.target="",delete this.form.id,this.followed=!0},editClick:function(){var t=this;if(0==this.list.length)this.$message({message:"至少选择一条数据",type:"warning"});else if(this.list.length>1)this.$message({message:"只能选择一条数据",type:"warning"});else{this.title="编辑菜单",this.plus=!0,this.form.name=this.list[0].name,this.form.ico=this.list[0].ico,this.form.authKey=this.list[0].authKey,this.form.sortNo=this.list[0].sortNo,this.form.parentId=this.list[0].parentId,this.form.sysId=this.list[0].sysId,this.form.url=this.list[0].url,this.form.target=this.list[0].target,this.form.id=this.list[0].id;var e={type:0,sysId:this.form.sysId};this.$api.post("auth/queryAuthEntityBySysId",e,function(e){t.menu=e.repData},function(t){console.log(t)})}},deleteClick:function(){var t=this;0==this.list.length?this.$message({message:"至少选择一条数据",type:"warning"}):this.$confirm("此操作将永久删除该系统, 是否继续?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(function(){t.ids="";for(var e=0;e<t.list.length;e++)t.ids+=t.list[e].id+",";var s={ids:t.ids.substring(0,t.ids.length-1)};t.$api.post("auth/delete",s,function(e){t.$message({message:"删除成功",type:"success"}),t.loadData()},function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},loadData:function(){var t=this,e={type:"0",pageNum:this.pageNum,pageRows:this.pageRows};t.$api.post("auth/findAll",e,function(e){t.rows=e.repData.rows,t.num=e.repData.total},function(t){console.log(t)}),t.$api.post("role/queryallsys",{},function(e){t.system=e.repData},function(t){console.log(t)})},handleSizeChange:function(t){this.pageRows=t,this.loadData()},handleCurrentChange:function(t){this.pageNum=t,this.loadData()},confirm:function(){var t=this;if(""!=this.form.sysId)if(""!=this.form.name)if(""!=this.form.sortNo){var e="",s="";"新增菜单"==this.title?(e="新增成功",s="auth/add"):"编辑菜单"==this.title&&(e="修改成功",s="auth/update"),this.$api.post(s,this.form,function(s){t.$message({message:e,type:"success"}),t.plus=!1,t.loadData()},function(t){console.log(t)})}else this.$message({message:"请输入顺序",type:"warning"});else this.$message({message:"请输入系统名称",type:"warning"});else this.$message({message:"请选择系统",type:"warning"})},chose:function(){var t=this;this.id=this.form.systemId,this.form.parentId="";var e={type:0,sysId:this.form.sysId};this.$api.post("auth/queryAuthEntityBySysId",e,function(e){t.menu=e.repData},function(t){console.log(t)})}},created:function(){this.loadData()}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-box v-box"},[s("div",{staticClass:"headDiv"},[s("div",{staticStyle:{padding:"20px",height:"auto",float:"left",width:"96%"}},[s("Button",{attrs:{type:t.add.type,icon:t.add.icon,text:t.add.text},on:{click:t.addClick}}),t._v(" "),s("Button",{attrs:{type:t.out.type,icon:t.out.icon,text:t.out.text},on:{click:t.deleteClick}}),t._v(" "),s("Button",{attrs:{type:t.edit.type,icon:t.edit.icon,text:t.edit.text},on:{click:t.editClick}})],1)]),t._v(" "),s("div",{staticClass:"flexTable"},[s("Table",{attrs:{data:t.rows,tableName:t.tableName,currentPage1:t.currentPage1,num:t.num},on:{"selection-change":t.handleSelectionChange,"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),s("el-dialog",{attrs:{title:t.title,visible:t.plus,width:"600px",center:""},on:{"update:visible":function(e){t.plus=e}}},[s("el-form",{staticClass:"clearfix",attrs:{model:t.form}},[s("el-form-item",{attrs:{label:"选择系统","label-width":t.formLabelWidth}},[s("el-select",{attrs:{placeholder:"请选择系统"},on:{change:t.chose},model:{value:t.form.sysId,callback:function(e){t.$set(t.form,"sysId",e)},expression:"form.sysId"}},t._l(t.system,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{staticClass:"left",attrs:{label:"菜单名称","label-width":t.formLabelWidth}},[s("el-input",{attrs:{placeholder:"请输入系统名称","auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"菜单样式","label-width":t.formLabelWidth}},[s("el-input",{attrs:{placeholder:"请输入菜单样式","auto-complete":"off"},model:{value:t.form.ico,callback:function(e){t.$set(t.form,"ico",e)},expression:"form.ico"}})],1),t._v(" "),s("el-form-item",{staticClass:"left",attrs:{label:"菜单标识","label-width":t.formLabelWidth}},[s("el-input",{attrs:{placeholder:"请输入菜单标识","auto-complete":"off"},model:{value:t.form.authKey,callback:function(e){t.$set(t.form,"authKey",e)},expression:"form.authKey"}})],1),t._v(" "),s("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"排序","label-width":t.formLabelWidth}},[s("el-input",{attrs:{placeholder:"请输入排序","auto-complete":"off"},model:{value:t.form.sortNo,callback:function(e){t.$set(t.form,"sortNo",e)},expression:"form.sortNo"}})],1),t._v(" "),s("el-form-item",{staticClass:"left",attrs:{label:"上级菜单","label-width":t.formLabelWidth}},[s("el-select",{attrs:{placeholder:"请选择上级菜单"},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}},t._l(t.menu,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"URL","label-width":t.formLabelWidth}},[s("el-input",{attrs:{placeholder:"请输入URL","auto-complete":"off"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),s("el-form-item",{staticClass:"left",attrs:{label:"路径","label-width":t.formLabelWidth}},[s("el-input",{attrs:{placeholder:"请输入路劲","auto-complete":"off"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("SolidButton",{attrs:{type:"solid",text:"确认"},on:{click:t.confirm}}),t._v(" "),s("SolidButton",{attrs:{type:"hollow",text:"取消"},on:{click:function(e){t.plus=!1}}})],1)],1)],1)},staticRenderFns:[]};var r=s("VU/8")(l,n,!1,function(t){s("FDYn"),s("QN5p")},"data-v-44cbb5b2",null);e.default=r.exports},QN5p:function(t,e){}});
//# sourceMappingURL=5.3708af1b059603877348.js.map