webpackJsonp([14],{"4R+W":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("hOPP"),a=i("cXnC"),o=i("Tftl"),n={components:{Button:s.a,Table:a.a,SolidButton:o.a},data:function(){return{num:0,currentPage1:1,rows:[],name:"",plus:!1,list:[],title:"",ids:"",followed:"",pageNum:"1",pageRows:"10",form:{name:"",code:"",description:""},formLabelWidth:"77px",add:{text:"新增",type:"icon-add",icon:"el-icon-plus"},out:{text:"删除",type:"icon-delete",icon:"el-icon-delete"},edit:{text:"编辑",type:"icon-edit",icon:"el-icon-edit"},tableName:[{value:"name",name:"系统名称"},{value:"code",name:"系统代号"},{value:"description",name:"系统描述"}]}},methods:{addClick:function(){this.title="新增子系统",this.plus=!0,this.form.name="",this.form.code="",this.form.description="",delete this.form.id,this.followed=!0},deleteClick:function(){var t=this;0==this.list.length?this.$message({message:"未勾选数据",type:"warning"}):this.$confirm("此操作将永久删除该系统, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.ids="";for(var e=0;e<t.list.length;e++)t.ids+=t.list[e].id+",";var i={ids:t.ids.substring(0,t.ids.length-1)};t.$api.post("sys/delete",i,function(e){t.$message({message:"删除成功",type:"success"}),t.loadData()},function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},editClick:function(){0==this.list.length?this.$message({message:"未勾选数据",type:"warning"}):this.list.length>1?this.$message({message:"请勾选单条数据",type:"warning"}):(this.title="修改子系统",this.plus=!0,this.form.name=this.list[0].name,this.form.code=this.list[0].code,this.form.description=this.list[0].description,this.form.id=this.list[0].id)},handleSelectionChange:function(t){this.list=t,console.log(this.list)},loadData:function(){var t=this,e=this,i={name:e.name,type:"1",pageNum:e.pageNum,pageRows:e.pageRows};e.$api.post("sys/all",i,function(t){e.rows=t.repData.rows,e.num=t.repData.rows.length},function(e){t.$message({message:e.repData.repMsg,type:"error"})})},handleSizeChange:function(t){this.pageRows=t,this.loadData()},handleCurrentChange:function(t){this.pageNum=t,this.loadData()},see:function(){this.loadData()},reset:function(){this.name="",this.loadData()},confirm:function(){var t=this;if(""!=this.form.name)if(""!=this.form.code)if(""!=this.form.description){var e="",i="";"新增子系统"==this.title?(e="新增成功",i="sys/add"):"修改子系统"==this.title&&(e="修改成功",i="sys/update"),this.$api.post(i,this.form,function(i){t.$message({message:e,type:"success"}),t.plus=!1,t.loadData()},function(t){console.log(t)})}else this.$message({message:"系统描述不能为空",type:"warning"});else this.$message({message:"系统代号不能为空",type:"warning"});else this.$message({message:"系统名称不能为空",type:"warning"})}},created:function(){this.loadData()}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-box v-box"},[i("div",{staticClass:"headDiv"},[i("div",{staticClass:"headerLeft"},[i("span",{staticClass:"system"},[t._v("系统名称")]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),i("div",{staticClass:"clearfix"},[i("div",{staticStyle:{float:"right"}},[i("SolidButton",{attrs:{type:"solid",text:"查询"},on:{click:t.see}}),t._v(" "),i("SolidButton",{attrs:{type:"hollow",text:"重置"},on:{click:t.reset}})],1)]),t._v(" "),i("div",{staticClass:"clearfix",staticStyle:{"padding-top":"20px",height:"auto"}},[i("Button",{attrs:{type:t.add.type,icon:t.add.icon,text:t.add.text},on:{click:t.addClick}}),t._v(" "),i("Button",{attrs:{type:t.out.type,icon:t.out.icon,text:t.out.text},on:{click:t.deleteClick}}),t._v(" "),i("Button",{attrs:{type:t.edit.type,icon:t.edit.icon,text:t.edit.text},on:{click:t.editClick}})],1)]),t._v(" "),i("div",{staticClass:"flexTable"},[i("Table",{attrs:{data:t.rows,tableName:t.tableName,currentPage1:t.currentPage1,num:t.num},on:{"selection-change":t.handleSelectionChange,"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.title,visible:t.plus,width:"600px"},on:{"update:visible":function(e){t.plus=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"系统名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入系统名称","auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"系统代号","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入系统代号","auto-complete":"off"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"系统描述","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入系统描述","auto-complete":"off"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("SolidButton",{attrs:{type:"hollow",text:"取消"},on:{click:function(e){t.plus=!1}}}),t._v(" "),i("SolidButton",{attrs:{type:"solid",text:"确认"},on:{click:t.confirm}})],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(n,l,!1,function(t){i("r3QA")},"data-v-54de2b7e",null);e.default=c.exports},r3QA:function(t,e){}});
//# sourceMappingURL=14.4e565de9748b17ecfbbc.js.map