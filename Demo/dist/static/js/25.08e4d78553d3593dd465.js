webpackJsonp([25],{AKps:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("hOPP"),s=a("Tftl"),o=a("cXnC"),l={components:{Button:i.a,SolidButton:s.a,Table:o.a},data:function(){return{add:{text:"新增",type:"icon-add",icon:"icon-add"},out:{text:"删除",type:"icon-delete",icon:"icon-delete"},edit:{text:"编辑",type:"icon-edit",icon:"icon-edit"},permission:{text:"权限管理",type:"icon-permission",icon:"icon-permission"},password:{text:"密码重置",type:"icon-password",icon:"icon-password"},head:{RealName:"",UserName:"",supOrganId:"",accountStatus:"",timeValue:""},selectType:"",supOrgans:[],accountSystems:[{name:"启用",id:0},{name:"禁用",id:1}],rows:[],multipleSelection:[],ids:"",tableName:[{value:"userName",name:"账号"},{value:"realName",name:"姓名"},{value:"orgName",name:"所属组织"},{value:"statusName",name:"账户状态"}],currentPage:1,pageRows:10,pageTotal:0,popwindow:{dialogFormVisible:!1,labelPosition:"left",title:"",LongLabelWidth:"70px",LabelWidth:"70px",isHidden:"",isDisable:!0,popType:"",RealName:"",UserName:"",supOrganId:"",accountStatus:""}}},methods:{loadData:function(){var e=this,t={pageNum:e.currentPage,pageRows:e.pageRows,createTime:e.head.timeValue[0],endTime:e.head.timeValue[1],orgId:e.head.supOrganId,realName:e.head.RealName,status:e.head.accountStatus,userName:e.head.UserName};e.$api.post("/user/select",t,function(t){console.log(t),e.rows=t.repData.rows,e.pageTotal=t.repData.total},function(e){console.log(e)})},requestDeptList:function(){var e=this;e.$api.post("org/doOrgList",{},function(t){console.log("zhe",t),e.supOrgans=t.repData.list},function(e){console.log(e)})},queryClick:function(){this.head.timeValue||(this.head.timeValue=""),this.loadData()},resetClick:function(){this.head.timeValue="",this.head.RealName="",this.head.UserName="",this.head.supOrganId="",this.head.accountStatus="",this.loadData()},deleteClick:function(){var e=this;0==this.multipleSelection.length?this.$message({message:"未勾选数据",type:"warning"}):this.$confirm("确定删除勾选数据吗？","",{confirmButtonText:"是",cancelButtonText:"否",type:"",center:!0}).then(function(){e.deleteMethod()}).catch(function(){})},deleteMethod:function(){var e=this,t=this;t.ids="";for(var a=0;a<t.multipleSelection.length;a++)t.ids+=t.multipleSelection[a].id+",";var i={ids:t.ids.substring(0,t.ids.length-1)};t.$api.post("user/delete",i,function(a){console.log(a),e.$message({message:"删除成功",type:"success"}),t.loadData()},function(e){console.log(e)})},addClick:function(){this.popwindow.dialogFormVisible=!0,this.popwindow.title="新增员工信息",this.popwindow.popType="add",this.popwindow.RealName="",this.popwindow.UserName="",this.popwindow.supOrganId="",this.popwindow.accountStatus=""},editClick:function(){if(1==this.multipleSelection.length){if(1==this.multipleSelection[0].status)return void this.$message({message:"账号已禁用不可编辑",type:"warning"});this.popwindow.dialogFormVisible=!0,this.popwindow.popType="edit",this.popwindow.title="修改员工信息",this.popwindow.isHidden="none",this.popwindow.RealName=this.multipleSelection[0].realName,this.popwindow.UserName=this.multipleSelection[0].userName,this.popwindow.supOrganId=this.multipleSelection[0].orgId,this.popwindow.accountStatus=this.multipleSelection[0].status}else this.$message({message:"请勾选单条数据",type:"warning"})},permissionClick:function(){if(1==this.multipleSelection.length){if(1==this.multipleSelection[0].status)return void this.$message({message:"账号已禁用不可分配权限",type:"warning"});console.log(this.multipleSelection[0]),this.$api.sSetObject("userData",this.multipleSelection[0]),this.$router.push({path:"/UserPermissAssign"})}else this.$message({message:"请勾选单条数据",type:"warning"})},passwordClick:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("确定重置密码？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.passwordSureClick()}).catch(function(){e.$message({type:"info",message:"取消保存"})}):this.$message({message:"未勾选数据",type:"warning"})},passwordSureClick:function(){var e=this,t=this;t.ids="";for(var a=0;a<t.multipleSelection.length;a++){if(1==t.multipleSelection[a].status)return void this.$message({message:"选中的数据中不可包含已禁用数据",type:"warning"});t.ids+=t.multipleSelection[a].id+","}var i={ids:t.ids.substring(0,t.ids.length-1)};t.$api.post("user/update/password",i,function(a){console.log(a),e.$message({message:"密码重置成功",type:"success"}),t.loadData()},function(e){console.log(e)})},popSureClick:function(){var e=this,t=this;if("add"==t.popwindow.popType){if(0==t.popwindow.RealName.length)return void this.$message({message:"请输入姓名",type:"warning"});if(0==t.popwindow.UserName.length)return void this.$message({message:"请输入账号",type:"warning"});if(0==t.popwindow.supOrganId.length)return void this.$message({message:"请选择所属组织",type:"warning"});if(0==t.popwindow.accountStatus.length)return void this.$message({message:"请选择账户状态",type:"warning"});var a={orgId:t.popwindow.supOrganId,realName:t.popwindow.RealName,status:t.popwindow.accountStatus,userName:t.popwindow.UserName};t.$api.post("user/add",a,function(a){console.log(a),e.$message({message:"新增成功",type:"success"}),t.loadData(),t.popwindow.dialogFormVisible=!1},function(e){console.log(e)})}else{a={id:t.multipleSelection[0].id,realName:t.popwindow.RealName,userName:t.popwindow.UserName,orgId:t.popwindow.supOrganId,status:t.popwindow.accountStatus};t.$api.post("user/update",a,function(a){console.log(a),e.$message({message:"修改成功",type:"success"}),t.loadData(),t.popwindow.dialogFormVisible=!1},function(e){console.log(e)})}},handleSelectionChange:function(e){console.log(e),this.multipleSelection=e},toggleSelection:function(e){var t=this,a=[];a.push(e),a?a.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSizeChange:function(e){console.log("每页"+e),this.pageRows=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页"+e),this.currentPage=e,this.loadData()}},created:function(){this.loadData(),this.requestDeptList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-box v-box"},[a("div",{staticClass:"headDiv"},[a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"spanclass"},[e._v("用户姓名")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入用户姓名",clearable:""},model:{value:e.head.RealName,callback:function(t){e.$set(e.head,"RealName",t)},expression:"head.RealName"}})],1),e._v(" "),a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"spanclass"},[e._v("账号")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.head.UserName,callback:function(t){e.$set(e.head,"UserName",t)},expression:"head.UserName"}})],1),e._v(" "),a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"spanclass"},[e._v("账户状态")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择账户状态"},model:{value:e.head.accountStatus,callback:function(t){e.$set(e.head,"accountStatus",t)},expression:"head.accountStatus"}},e._l(e.accountSystems,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"spanclass"},[e._v("创建时间")]),e._v(" "),a("el-date-picker",{staticClass:"timeclass",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.head.timeValue,callback:function(t){e.$set(e.head,"timeValue",t)},expression:"head.timeValue"}})],1),e._v(" "),a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"spanclass"},[e._v("所属组织")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择上级组织"},model:{value:e.head.supOrganId,callback:function(t){e.$set(e.head,"supOrganId",t)},expression:"head.supOrganId"}},e._l(e.supOrgans,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"headRight"},[a("SolidButton",{attrs:{type:"solid",text:"查询"},on:{click:e.queryClick}}),e._v(" "),a("SolidButton",{attrs:{type:"hollow",text:"重置"},on:{click:e.resetClick}})],1)]),e._v(" "),a("div",{staticClass:"iconButton clearfix"},[a("Button",{attrs:{type:e.add.type,icon:e.add.icon,text:e.add.text},on:{click:e.addClick}}),e._v(" "),a("Button",{attrs:{type:e.out.type,icon:e.out.icon,text:e.out.text},on:{click:e.deleteClick}}),e._v(" "),a("Button",{attrs:{type:e.edit.type,icon:e.edit.icon,text:e.edit.text},on:{click:e.editClick}}),e._v(" "),a("Button",{attrs:{type:e.permission.type,icon:e.permission.icon,text:e.permission.text},on:{click:e.permissionClick}}),e._v(" "),a("Button",{attrs:{type:e.password.type,icon:e.password.icon,text:e.password.text},on:{click:e.passwordClick}})],1)]),e._v(" "),a("div",{staticClass:"flexTable"},[a("Table",{attrs:{data:e.rows,tableName:e.tableName,currentPage1:e.currentPage,num:e.pageTotal},on:{"selection-change":e.handleSelectionChange,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.popwindow.title,visible:e.popwindow.dialogFormVisible,width:"600px",center:""},on:{"update:visible":function(t){e.$set(e.popwindow,"dialogFormVisible",t)}}},[a("el-form",{staticClass:"clearfix",attrs:{model:e.popwindow}},[a("el-form-item",{attrs:{"label-position":e.popwindow.labelPosition,label:"姓名","label-width":e.popwindow.LabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入用户姓名",clearable:""},model:{value:e.popwindow.RealName,callback:function(t){e.$set(e.popwindow,"RealName",t)},expression:"popwindow.RealName"}})],1),e._v(" "),a("el-form-item",{staticClass:"lastformItem",attrs:{"label-position":e.popwindow.labelPosition,label:"所属组织","label-width":e.popwindow.LongLabelWidth}},[a("el-select",{staticClass:"selectwidth",attrs:{filterable:"",placeholder:"请选择上级组织"},model:{value:e.popwindow.supOrganId,callback:function(t){e.$set(e.popwindow,"supOrganId",t)},expression:"popwindow.supOrganId"}},e._l(e.supOrgans,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{"label-position":e.popwindow.labelPosition,label:"账号","label-width":e.popwindow.LabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入账号",clearable:""},model:{value:e.popwindow.UserName,callback:function(t){e.$set(e.popwindow,"UserName",t)},expression:"popwindow.UserName"}})],1),e._v(" "),a("el-form-item",{staticClass:"lastformItem",attrs:{"label-position":e.popwindow.labelPosition,label:"账户状态","label-width":e.popwindow.LongLabelWidth}},[a("el-select",{staticClass:"selectwidth",attrs:{filterable:"",placeholder:"请选择账号状态"},model:{value:e.popwindow.accountStatus,callback:function(t){e.$set(e.popwindow,"accountStatus",t)},expression:"popwindow.accountStatus"}},e._l(e.accountSystems,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("SolidButton",{attrs:{type:"hollow",text:"取消"},on:{click:function(t){e.popwindow.dialogFormVisible=!1}}}),e._v(" "),a("SolidButton",{attrs:{type:"solid",text:"确定"},on:{click:e.popSureClick}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,n,!1,function(e){a("Q0rB")},"data-v-0a161c13",null);t.default=c.exports},Q0rB:function(e,t){}});
//# sourceMappingURL=25.08e4d78553d3593dd465.js.map