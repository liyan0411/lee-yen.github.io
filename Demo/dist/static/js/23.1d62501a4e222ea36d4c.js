webpackJsonp([23],{cwPI:function(e,t){},"s/ti":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("hOPP"),i=o("Tftl"),l=o("cXnC"),s={components:{Button:a.a,SolidButton:i.a,Table:l.a},data:function(){return{add:{text:"新增",type:"icon-add",icon:"icon-add"},out:{text:"删除",type:"icon-delete",icon:"icon-delete"},edit:{text:"编辑",type:"icon-edit",icon:"icon-edit"},head:{inputOrganName:"",inputOrganCode:""},rows:[],multipleSelection:[],ids:[],tableName:[{value:"name",name:"组织名称"},{value:"code",name:"组织编码"},{value:"pname",name:"上级组织"},{value:"crtTime",name:"创建时间"}],currentPage:1,pageRows:10,pageTotal:0,pop:{centerDialogVisible:!1,labelPosition:"left",title:"",formLabelWidth:"70px",isHidden:"block",isDisable:!1,popType:"",name:"",code:"",pnamecode:"",accountStatus:"",supOrgans:[],accountSystems:[{name:"总公司",id:1},{name:"分公司",id:2}]}}},methods:{loadData:function(){var e=this,t={pageNum:e.currentPage,pageRows:e.pageRows,name:e.head.inputOrganName,code:e.head.inputOrganCode};e.$api.post("org/doOrgList",t,function(t){console.log(t),e.rows=t.repData.list,e.pageTotal=t.repData.total},function(e){console.log(e)})},requestDeptList:function(){var e=this;e.$api.post("org/doOrgList",{},function(t){console.log(t),e.pop.supOrgans=t.repData.list},function(e){console.log(e)})},queryClick:function(){this.loadData()},resetClick:function(){this.head.inputOrganName="",this.head.inputOrganCode="",this.loadData()},deleteClick:function(){var e=this;0==this.multipleSelection.length?this.$message({message:"未勾选数据",type:"warning"}):this.$confirm("确定删除勾选数据吗？","",{confirmButtonText:"是",cancelButtonText:"否",type:"",center:!0}).then(function(){e.deleteMethod()}).catch(function(){})},deleteMethod:function(){var e=this,t=this;t.ids=[];for(var o=0;o<t.multipleSelection.length;o++)t.ids.push(t.multipleSelection[o].id);console.log(t.ids);var a={ids:t.ids};t.$api.post("org/doOrgDelete",a,function(o){console.log(o),e.$message({message:"删除成功",type:"success"}),t.loadData(),t.requestDeptList()},function(e){console.log(e)})},addClick:function(){this.pop.centerDialogVisible=!0,this.pop.title="新增组织",this.pop.popType="add",this.pop.isDisable=!1,this.pop.isHidden="block",this.pop.name="",this.pop.code="",this.pop.pnamecode="",this.pop.accountStatus=""},editClick:function(){1==this.multipleSelection.length?(this.pop.centerDialogVisible=!0,this.pop.title="编辑组织",this.pop.popType="edit",this.pop.isHidden="none",this.pop.isDisable=!0,this.pop.name=this.multipleSelection[0].name,this.pop.pnamecode=this.multipleSelection[0].pId,this.pop.accountStatus=this.multipleSelection[0].orgType):this.$message({message:"请勾选单条数据",type:"warning"})},popSureClick:function(){var e=this,t=this;if("add"==t.pop.popType){if(0==t.pop.name.length)return void this.$message({message:"请输入组织名称",type:"warning"});if(0==t.pop.code.length)return void this.$message({message:"请输入组织编码",type:"warning"});if(0==t.pop.pnamecode.length)return void this.$message({message:"请选择上级组织",type:"warning"});if(0==t.pop.accountStatus.length)return void this.$message({message:"请选择组织类别",type:"warning"});var o={name:t.pop.name,code:t.pop.code,pId:t.pop.pnamecode,orgType:t.pop.accountStatus};t.$api.post("org/doOrgInsert",o,function(o){console.log(o),e.$message({message:"新增成功",type:"success"}),t.loadData(),t.requestDeptList(),t.pop.centerDialogVisible=!1},function(e){console.log(e)})}else{if(0==t.pop.name.length)return void this.$message({message:"请输入组织名称",type:"warning"});if(0==t.pop.accountStatus.length)return void this.$message({message:"请选择组织类别",type:"warning"});o={id:t.multipleSelection[0].id,name:t.pop.name,code:t.multipleSelection[0].code,pId:t.pop.pnamecode,orgType:t.pop.accountStatus};t.$api.post("org/doOrgUpdate",o,function(o){console.log(o),e.$message({message:"修改成功",type:"success"}),t.loadData(),t.requestDeptList(),t.pop.centerDialogVisible=!1},function(e){console.log(e)})}},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e)},toggleSelection:function(e){var t=this,o=[];o.push(e),o?o.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSizeChange:function(e){console.log("每页"+e),this.pageRows=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页"+e),this.currentPage=e,this.loadData()}},created:function(){this.loadData(),this.requestDeptList()}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"d-box v-box"},[o("div",{staticClass:"headDiv"},[o("div",{staticClass:"headerLeft"},[o("span",{staticClass:"spanclass"},[e._v("组织名称")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入组织名称",clearable:""},model:{value:e.head.inputOrganName,callback:function(t){e.$set(e.head,"inputOrganName",t)},expression:"head.inputOrganName"}})],1),e._v(" "),o("div",{staticClass:"headerLeft"},[o("span",{staticClass:"spanclass"},[e._v("组织编码")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入组织编码",clearable:""},model:{value:e.head.inputOrganCode,callback:function(t){e.$set(e.head,"inputOrganCode",t)},expression:"head.inputOrganCode"}})],1),e._v(" "),o("div",{staticClass:"clearfix"},[o("div",{staticClass:"headRight"},[o("SolidButton",{attrs:{type:"solid",text:"查询"},on:{click:e.queryClick}}),e._v(" "),o("SolidButton",{attrs:{type:"hollow",text:"重置"},on:{click:e.resetClick}})],1)]),e._v(" "),o("div",{staticClass:"iconButton clearfix"},[o("Button",{attrs:{type:e.add.type,icon:e.add.icon,text:e.add.text},on:{click:e.addClick}}),e._v(" "),o("Button",{attrs:{type:e.out.type,icon:e.out.icon,text:e.out.text},on:{click:e.deleteClick}}),e._v(" "),o("Button",{attrs:{type:e.edit.type,icon:e.edit.icon,text:e.edit.text},on:{click:e.editClick}})],1)]),e._v(" "),o("div",{staticClass:"flexTable"},[o("Table",{attrs:{data:e.rows,tableName:e.tableName,currentPage1:e.currentPage,num:e.pageTotal},on:{"selection-change":e.handleSelectionChange,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),o("el-dialog",{attrs:{title:e.pop.title,visible:e.pop.centerDialogVisible,width:"600px",center:""},on:{"update:visible":function(t){e.$set(e.pop,"centerDialogVisible",t)}}},[o("el-form",{staticClass:"clearfix",attrs:{model:e.pop}},[o("el-form-item",{attrs:{"label-position":e.pop.labelPosition,label:"组织名称","label-width":e.pop.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入组织名称","auto-complete":"off",clearable:""},model:{value:e.pop.name,callback:function(t){e.$set(e.pop,"name",t)},expression:"pop.name"}})],1),e._v(" "),o("el-form-item",{staticClass:"lastformItem",style:{display:e.pop.isHidden},attrs:{"label-position":e.pop.labelPosition,label:"组织编码","label-width":e.pop.formLabelWidth}},[o("el-input",{style:{display:e.pop.isHidden},attrs:{placeholder:"请输入组织编码","auto-complete":"off",clearable:""},model:{value:e.pop.code,callback:function(t){e.$set(e.pop,"code",t)},expression:"pop.code"}})],1),e._v(" "),o("el-form-item",{class:e.pop.isDisable?"lastformItem":"",attrs:{"label-position":e.pop.labelPosition,label:"上级组织","label-width":e.pop.formLabelWidth}},[o("el-select",{staticClass:"selectwidth",attrs:{disabled:e.pop.isDisable,filterable:"",placeholder:"请选择上级组织"},model:{value:e.pop.pnamecode,callback:function(t){e.$set(e.pop,"pnamecode",t)},expression:"pop.pnamecode"}},e._l(e.pop.supOrgans,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{class:e.pop.isDisable?"":"lastformItem",attrs:{"label-position":e.pop.labelPosition,label:"组织类别","label-width":e.pop.formLabelWidth}},[o("el-select",{staticClass:"selectwidth",attrs:{filterable:"",placeholder:"请选择组织类别"},model:{value:e.pop.accountStatus,callback:function(t){e.$set(e.pop,"accountStatus",t)},expression:"pop.accountStatus"}},e._l(e.pop.accountSystems,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("SolidButton",{attrs:{type:"hollow",text:"取消"},on:{click:function(t){e.pop.centerDialogVisible=!1}}}),e._v(" "),o("SolidButton",{attrs:{type:"solid",text:"确定"},on:{click:e.popSureClick}})],1)],1)],1)},staticRenderFns:[]};var p=o("VU/8")(s,n,!1,function(e){o("cwPI")},"data-v-2cf905d8",null);t.default=p.exports}});
//# sourceMappingURL=23.1d62501a4e222ea36d4c.js.map